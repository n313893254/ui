
{{#accordion-list showExpandAll=false as | al expandFn |}}
  {{#accordion-list-item
       title=(t 'clusterNew.tencentccs.access.title')
       detail=(t 'clusterNew.tencentccs.access.detail')
       expandAll=expandAll
       expand=(action expandFn)
       expandOnInit=true
  }}
    <div class="row">
      <div class="col span-4">
        <label class="acc-label">{{t 'clusterNew.tencentccs.region.label'}}</label>
        {{#if (eq step 1)}}
          {{searchable-select
            class="form-control"
            content=regionChoices
            value=config.region
          }}
        {{else}}
          <div>{{config.region}}</div>
        {{/if}}
      </div>

      <div class="col span-4">
        <label class="acc-label">{{t 'clusterNew.tencentccs.secretId.label'}}{{field-required}}</label>
        {{#if (eq step 1)}}
          {{input type="text" name="username" classNames="form-control" placeholder=(t 'clusterNew.tencentccs.secretId.placeholder') value=config.secretId}}
        {{else}}
          <div>{{config.secretId}}</div>
        {{/if}}
      </div>

      <div class="col span-4">
        <label class="acc-label">{{t 'clusterNew.tencentccs.secretKey.label'}}{{field-required}}</label>
        {{#if (eq step 1)}}
          {{input type="password" name="password" classNames="form-control" placeholder=(t 'clusterNew.tencentccs.secretKey.placeholder') value=config.secretKey}}
        {{else}}
          <div class="text-muted text-italic">{{t 'clusterNew.tencentccs.secretKey.provided'}}</div>
        {{/if}}
      </div>
    </div>
  {{/accordion-list-item}}

  {{#if (eq step 1)}}
    {{save-cancel
        editing=(eq mode 'edit')
        save="tencentLogin"
        cancel=close
        createLabel="clusterNew.tencentccs.access.next"
        savingLabel="clusterNew.tencentccs.access.loading"
    }}
  {{/if}}

  {{#if (gte step 2)}}
    {{#accordion-list-item
         title=(t 'clusterNew.tencentccs.cluster.title')
         detail=(t 'clusterNew.tencentccs.cluster.detail')
         showExpand=false
         expandOnInit=true
         expandAll=al.expandAll
         expand=(action expandFn)
    }}
      <div class="row">
        <div class="col span-6">
          <label class="acc-label">{{t 'clusterNew.tencentccs.version.label'}}</label>
          {{#if (eq step 2)}}
            {{searchable-select
              class="form-control"
              content=versionChoices
              value=config.clusterVersion
            }}
          {{else}}
            <div>{{config.clusterVersion}}</div>
          {{/if}}
        </div>
        <div class="col span-6">
          <label class="acc-label">{{t 'clusterNew.tencentccs.goodsNum.label'}}{{field-required}}</label>
          {{#if (eq step 2)}}
            {{input-integer min=1 max=100 value=config.goodsNum classNames="form-control" placeholder=(t 'clusterNew.tencentccs.goodsNum.placeholder')}}
            <p class="help-block">
              {{t 'clusterNew.tencentccs.goodsNum.help'}}
            </p>
          {{else}}
            <div>{{config.goodsNum}}</div>
          {{/if}}
        </div>
      </div>
      <div class="row">
        <div class="col span-6">
          <label class="acc-label">{{t 'clusterNew.tencentccs.vpc.label'}}{{field-required}}</label>
          {{#if (eq step 2)}}
            {{searchable-select
              class="form-control"
              content=vpcChoices
              value=config.vpcId
            }}
          {{else}}
            <div>{{config.vpcId}}</div>
          {{/if}}
        </div>
        <div class="col span-6">
          <label class="acc-label">{{t 'clusterNew.tencentccs.cidr.label'}}{{field-required}}</label>
          {{#if (eq step 2)}}
            {{input type="text" value=config.clusterCidr placeholder=(t 'clusterNew.tencentccs.cidr.placeholder')}}
          {{else}}
            <div>{{config.clusterCidr}}</div>
          {{/if}}
        </div>
      </div>
    {{/accordion-list-item}}

    {{#if (eq step 2)}}
      {{save-cancel
          editing=(eq mode 'edit')
          save="loadNodeConfig"
          cancel=close
          createLabel="clusterNew.tencentccs.cluster.next"
          savingLabel="clusterNew.tencentccs.cluster.loading"
      }}
    {{/if}}
  {{/if}}

  {{#if (gte step 3)}}
    {{#accordion-list-item
         title=(t 'clusterNew.tencentccs.node.title')
         detail=(t 'clusterNew.tencentccs.node.detail')
         showExpand=false
         expandOnInit=true
         expandAll=al.expandAll
         expand=(action expandFn)
    }}
      <div class="row">
        <div class="col span-6">
          <label class="acc-label">{{t 'clusterNew.tencentccs.zone.label'}}{{field-required}}</label>
          {{#if (eq step 3)}}
            {{searchable-select
              class="form-control"
              content=zoneChoices
              value=config.zoneId
            }}
          {{else}}
            <div>{{selectedZone.label}}</div>
          {{/if}}
        </div>

        <div class="col span-6">
          <label class="acc-label">{{t 'clusterNew.tencentccs.subnet.label'}}{{field-required}}</label>
          {{#if (eq step 3)}}
            {{searchable-select
              class="form-control"
              content=subnetChoices
              value=config.subnetId
            }}
          {{else}}
            <div>{{config.subnetId}}</div>
          {{/if}}
        </div>
      </div>
      <div class="row">
        <div class="col span-6">
          <label class="acc-label">{{t 'clusterNew.tencentccs.instanceType.label'}}{{field-required}}</label>
          {{#if (eq step 3)}}
            {{searchable-select
              class="form-control"
              content=instanceChoices
              value=config.instanceType
            }}
          {{else}}
            <div>{{config.instanceType}}</div>
          {{/if}}
        </div>
      </div>
    {{/accordion-list-item}}

    {{#if (eq step 3)}}
      {{save-cancel
          editing=(eq mode 'edit')
          save="loadInstanceConfig"
          cancel=close
          createLabel="clusterNew.tencentccs.node.next"
          savingLabel="clusterNew.tencentccs.node.loading"
      }}
    {{/if}}
  {{/if}}

  {{#if (gte step 4)}}
    {{#accordion-list-item
         title=(t 'clusterNew.tencentccs.instance.title')
         detail=(t 'clusterNew.tencentccs.instance.detail')
         showExpand=false
         expandOnInit=true
         expandAll=al.expandAll
         expand=(action expandFn)
    }}
      <div class="row">
        <div class="col span-6">
          <label class="acc-label">{{t 'clusterNew.tencentccs.os.label'}}</label>
          {{searchable-select
            class="form-control"
            content=osChoices
            value=config.osName
          }}
        </div>
        <div class="col span-6">
          <label class="acc-label">{{t 'clusterNew.tencentccs.securityGroup.label'}}{{field-required}}</label>
          {{searchable-select
            class="form-control"
            content=sgChoices
            value=config.sgId
          }}
        </div>
      </div>

      <div class="row">
        <div class="col span-6">
          <label class="acc-label">{{t 'clusterNew.tencentccs.rootType.label'}}</label>
          {{searchable-select
            class="form-control"
            content=rootDiskChoices
            localizedLabel=true
            value=config.rootType
          }}
        </div>
        <div class="col span-6">
          <label class="acc-label">{{t 'clusterNew.tencentccs.rootSize.label'}}</label>
          <div class="input-group">
            {{input-integer min=20 max=50 value=config.rootSize classNames="form-control" placeholder=(t 'clusterNew.tencentccs.rootSize.placeholder')}}
            <span class="input-group-addon bg-default">{{t 'generic.gigabyte'}}</span>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col span-6">
          <label class="acc-label">{{t 'clusterNew.tencentccs.storageType.label'}}</label>
          {{searchable-select
            class="form-control"
            content=storageDiskChoices
            localizedLabel=true
            value=config.storageType
          }}
        </div>
        <div class="col span-6">
          <label class="acc-label">{{t 'clusterNew.tencentccs.storageSize.label'}}</label>
          <div class="input-group">
            {{input-integer min=0 value=config.storageSize classNames="form-control" placeholder=(t 'clusterNew.tencentccs.storageSize.placeholder')}}
            <span class="input-group-addon bg-default">{{t 'generic.gigabyte'}}</span>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col span-6">
          <label class="acc-label">{{t 'clusterNew.tencentccs.bandwidthType.label'}}</label>
          {{searchable-select
            class="form-control"
            content=bandWidthChoices
            localizedLabel=true
            value=config.bandwidthType
          }}
        </div>
        <div class="col span-6">
          <label class="acc-label">{{t 'clusterNew.tencentccs.bandwidth.label'}}</label>
          <div class="input-group">
            {{input-integer min=0 value=config.bandwidth classNames="form-control" placeholder=(t 'clusterNew.tencentccs.bandwidth.placeholder')}}
            <span class="input-group-addon bg-default">{{t 'generic.mbps'}}</span>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col span-6">
          <label class="acc-label">{{t 'clusterNew.tencentccs.keyPair.label'}}{{field-required}}</label>
          {{searchable-select
            class="form-control"
            content=keyChoices
            value=config.keyId
          }}
        </div>
      </div>
    {{/accordion-list-item}}

    {{save-cancel
        editing=(eq mode 'edit')
        save="save"
        cancel=close
    }}
  {{/if}}

  {{top-errors errors=errors}}
  {{top-errors errors=otherErrors}}
  {{top-errors errors=clusterErrors}}
{{/accordion-list}}
