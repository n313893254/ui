<div class="acc-label pb-5 pt-10">{{t 'pipelineNotification.header'}}</div>
<section class="box">
  <div class="row mb-0">
    <div class="col span-3 text-right mt-0 pull-right">
      <button class="btn bg-link icon-btn" {{action "clear"}}>
        <span class="darken"><i class="icon icon-minus text-small"/></span>
        <span>Remove Notification</span>
      </button>
    </div>
  </div>
  <div class="row">
    <div class="col span-2">
      <div class="pt-10">
        {{t 'pipelineNotification.when'}}
      </div>
    </div>
    <div class="col span-9">
      <div class="pt-10">
        <div class="checkbox inline-block">
          <label>
            {{input type="checkbox" checked=failed}}
            {{t 'pipelineNotification.condition.failed.label'}}
          </label>
        </div>
        <div class="checkbox inline-block ml-10">
          <label>
            {{input type="checkbox" checked=success}}
            {{t 'pipelineNotification.condition.success.label'}}
          </label>
        </div>
        <div class="checkbox inline-block ml-10">
          <label>
            {{input type="checkbox" checked=changed}}
            {{t 'pipelineNotification.condition.changed.label'}}
          </label>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col span-2">
      <div class="pt-10">
        {{t 'pipelineNotification.send'}}
      </div>
    </div>
    <div class="col span-9">
      {{#unless customizeMessage}}
        <div class="pt-10">
          {{t 'pipelineNotification.defaultText'}}
          <div class="inline-block">
            <button class="btn btn-sm bg-transparent pl-0" {{action 'toogleMessage'}}>
              {{t 'generic.customize'}}
            </button>
          </div>
        </div>
      {{/unless}}
      {{#if customizeMessage}}
        {{input value=config.message
                placeholder=(t 'pipelineNotification.message.placeholder')
        }}
      {{/if}}
    </div>
  </div>

  {{#unless haveNotifiers}}
    <div class="banner bg-warning">
      <div class="banner-icon p-10"><i class="icon icon-alert"></i></div>
      <div class="banner-message">
        {{t 'alertPage.newOrEdit.noNotifierHelpText'}} {{#link-to-external 'notifier' clusterId}} {{t 'alertPage.newOrEdit.createOne'}} {{/link-to-external}}.
      </div>
    </div>
  {{/unless}}
  <div class="row">
    <div class="col span-2">
      <div style="padding-top: 12px;">
        {{t 'pipelineNotification.asMessage'}}
      </div>
    </div>
    <div class="col span-9">
      {{#each config.recipients as |recipient idx|}}
        {{form-recipient-item
            disableRemove=disableRemove
            remove="remove"
            isFirst=(eq idx 0)
            notifiers=notifiers
            model=recipient
        }}
      {{/each}}
      <div class="mt-15">
        <button class="btn bg-link icon-btn p-0" {{action "add"}}>
          <span class="darken"><i class="icon icon-plus text-small"/></span>
          <span>{{t 'alertPage.newOrEdit.addRecipient'}}</span>
        </button>
      </div>
    </div>
  </div>
</section>
