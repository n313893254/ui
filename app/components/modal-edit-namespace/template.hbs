<section class="horizontal-form container-fluid">
  <h2>
    {{t "editStack.title"}}
  </h2>
  <label class="acc-label pb-5">
    {{t "editStack.name.label"}}
  </label>
  {{input
    type="text"
    value=primaryResource.name
    classNames="form-control"
    placeholder=(t "editStack.name.placeholder")
    disabled=true
  }}

  <label class="pt-20 pb-5">{{t "editStack.description.label"}}</label>
  {{textarea
    value=primaryResource.description
    classNames="form-control no-resize"
    rows="5"
    placeholder=(t "editStack.description.placeholder")
  }}

  <label class="pt-20 pb-5">
    {{t "editStack.project.label"}}
  </label>
  {{new-select
    classNames="form-control"
    optionValuePath="id"
    optionLabelPath="displayName"
    content=allProjects
    value=primaryResource.projectId
    prompt="editStack.project.prompt"
    localizedPrompt=true
  }}

  {{#if istioEnabled}}
    <label class="pt-20 pb-5">
      {{t "editStack.autoInject.label"}}
    </label>
    <div>
      {{#if istioInjection}}
        <div class="btn-group no-inline-space">
          <div class="btn btn-link btn-sm bg-success" style="width: 80px;">{{t 'generic.enable'}}</div>
          <div class="btn btn-link btn-sm bg-default" style="width: 80px;" {{action "toggleAutoInject"}}>{{t 'generic.disabled'}}</div>
        </div>
      {{else}}
        <div class="btn-group no-inline-space">
          <div class="btn btn-link btn-sm bg-default" style="width: 80px;" {{action "toggleAutoInject"}}>{{t 'generic.enable'}}</div>
          <div class="btn btn-link btn-sm bg-primary" style="width: 80px;">{{t 'generic.disabled'}}</div>
        </div>
      {{/if}}
    </div>
  {{/if}}

  <div class="row mt-20">
    {{#accordion-list showExpandAll=false as | al expandFn | }}
      {{#if (and primaryResource.project.resourceQuota (not switchingProject))}}
        {{#accordion-list-item
           title=(t "editStack.resourceQuota.title")
           detail=(t "editStack.resourceQuota.detail")
           expandAll=al.expandAll
           expand=(action expandFn)
           expandOnInit=true
        }}
          {{namespace-resource-quota
            editing=(or editing isNew)
            isNew=false
            expanded=expanded
            limit=primaryResource.resourceQuota.limit
            projectLimit=projectLimit
            usedLimit=projectUsedLimit
            nsDefaultQuota=nsDefaultQuota
            changed=(action "updateNsQuota")
          }}
        {{/accordion-list-item}}
      {{/if}}

      {{#accordion-list-item
         title=(t "projectsPage.containerDefaultLimit.title")
         detail=(t "projectsPage.containerDefaultLimit.detail")
         expandAll=al.expandAll
         expand=(action expandFn)
         expandOnInit=true
      }}
        {{container-default-limit
          editing=(or editing isNew)
          expanded=expanded
          limit=primaryResource.containerDefaultResourceLimit
          changed=(action "updateContainerDefault")
        }}
      {{/accordion-list-item}}

      {{form-labels-annotations
        classNames="accordion-wrapper"
        expandAll=al.expandAll
        expandFn=expandFn
        initialLabels=primaryResource.labels
        model=primaryResource
        editing=(or editing isNew)
        setLabels=(action "setLabels")
      }}
    {{/accordion-list}}
  </div>

</section>

{{top-errors errors=errors}}
{{save-cancel
  editing=editing
  save=(action "save")
  cancel=(action "cancel")
}}
